figure;
%% Thrust vs time
subplot(2,1,1);
matlab_plot_1 = plot(tout, thrust, 'm--*');
hold on;
openrocket_plot_1 = plot(...
    openrocket_VarName1(1:indexmax_openrocket), ...
    openrocket_ThrustN(1:indexmax_openrocket), ...
    'b--.'...
);
rasaero_plot_1 = plot( ...
    rasaero_Timesec(1:indexmax_rasaero), ...
    rasaero_Thrustlb(1:indexmax_rasaero)*lbf2newton, ...
    'c--o' ...
);
rocksim_plot_1 = plot( ...
    Rocksim_Time(1:indexmax_Rocksim), ...
    Rocksim_yThrustN(1:indexmax_Rocksim), ...
    'k- .' ...
);
hold off;

h_legend = legend(...
    [matlab_plot_1, openrocket_plot_1, rasaero_plot_1, rocksim_plot_1],...
    'Matlab','OpenRocket','Rasaero','Rocksim', ...
    'location', 'northeast' ...
);
set(h_legend,'FontSize',14);
set(h_legend,'FontName','Courier New');

clear title xlabel ylabel
title('Thrust vs Time');
ylabel('Thrust (N)');
xlabel('Time (s)');

xlim([0,motorburntime+5]);

%% Mass vs Time
subplot(2,1,2)

matlab_plot_2 = plot(tout, mass, 'm--*');
hold on;
openrocket_plot_2 = plot(...
    openrocket_VarName1(1:indexmax_openrocket), ...
    openrocket_Massg(1:indexmax_openrocket)/1000, ...
    'b--.'...
);
rasaero_plot_2 = plot( ...
    rasaero_Timesec(1:indexmax_rasaero), ...
    rasaero_Weightlb(1:indexmax_rasaero)*lbf2kilogram, ...
    'c--o' ...
);
rocksim_plot_2 = plot( ...
    Rocksim_Time(1:indexmax_Rocksim), ...
    Rocksim_MassOunces(1:indexmax_Rocksim)*ounce2kilogram, ...
    'k- .' ...
);
hold off

h_legend = legend(...
    [matlab_plot_2, openrocket_plot_2, rasaero_plot_2, rocksim_plot_2],...
    'Matlab','OpenRocket','Rasaero','Rocksim', ...
    'location', 'northeast' ...
);
set(h_legend,'FontSize',14);
set(h_legend,'FontName','Courier New');

clear title xlabel ylabel
title('Mass vs Time');
ylabel('Mass (kg)');
xlabel('Time (s)');

xlim([0,motorburntime+5]);

%% Conditionally save the plot
if exist('saveplots')
    if saveplots
        saveas(gcf, 'documentation/images/plots/error_thrust_mass.png');
        export_fig error_drag_plot.png -m2
    end
end
