if isempty(openrocket_time)
    plot_openrocket_validation_prepare
end;

fprintf( 'Maximum OpenRocket altitude:      %d m, %d ft \r',...
    max(openrocket_altitude),...
    max(openrocket_altitude)*3.28...
    );
fprintf( 'Maximum Matlab Altitude:          %d m, %d ft \r\n',...
    max(altitude),...
    max(altitude)*3.28...
    );

fprintf( 'Maximum OpenRocket Velocity:      %d m/s, %d ft/s \r',...
    max(openrocket_velocity),...
    max(openrocket_velocity)*3.28...
    );
fprintf( 'Maximum Matlab Velocity:          %d m/s, %d ft/s \r\n',...
    max(velocity),...
    max(velocity)*3.28...
    );


fprintf( 'Maximum OpenRocket acceleration:  %d m/s^2, %d ft/s^2 \r',...
    max(openrocket_acceleration),...
    max(openrocket_acceleration)*3.28...
    );
fprintf( 'Maximum Matlab acceleration:      %d m/s^2, %d ft/s^2 \r\n',...
    max(acceleration),...
    max(acceleration)*3.28...
    );

fprintf( 'Maximum OpenRocket drag force:    %d m/s \r',...
    max(openrocket_acceleration)...
    );
fprintf( 'Maximum Matlab drag force:        %d m/s \r\n',...
    max(acceleration)...
    );

%--------------------------------------------------------------------------------
% Overall performance
%--------------------------------------------------------------------------------

%% Set the x-axis
openrocket_xdata = {openrocket_time, openrocket_time, openrocket_time, openrocket_time, openrocket_time};
matlab_xdata     = {tout, tout, tout, tout, tout};

%% Set the y-axis

matlab_ydata = {
    altitude,...
    velocity,...
    acceleration,...
    thrust,...
    drag_force,...
};

openrocket_ydata = {
    openrocket_altitude(1:arraysize),...
    openrocket_velocity(1:arraysize),...
    openrocket_acceleration(1:arraysize),...
    openrocket_thrust(1:arraysize),...
    openrocket_drag_force(1:arraysize),...
};

%--------------------------------------------------------------------------------
% Overall performance
%--------------------------------------------------------------------------------

%% Set the graph attributes
ylabel              = {'Altitude','Velocity','Acceleration','Thrust','Drag Force'};
matlab_linespec     = {'b','b','b','b','b'};
openrocket_linespec = {'b','b','b','b','b'};

%% Plot
multiplot(openrocket_xdata, openrocket_ydata, 'YLabel', ylabel, ...
 'LineSpec', openrocket_linespec, 'Title', 'OpenRocket', 'XLabel', 'time');

%% Conditionally save the plot
if saveplots 
    %saveas(gcf, '../documentation/images/plots/atmosphere_plot.png');
    %export_fig atmosphere_plot.pnd -m2
end

multiplot(matlab_xdata, matlab_ydata, 'YLabel', ylabel, ...
 'LineSpec', matlab_linespec, 'Title', 'Matlab', 'XLabel', 'time');

%% Conditionally save the plot
if saveplots 
    %saveas(gcf, '../documentation/images/plots/atmosphere_plot.png');
    %export_fig atmosphere_plot.pnd -m2
end
